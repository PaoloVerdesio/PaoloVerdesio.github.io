<!DOCTYPE html>
<html>
<head>
  <title>Il mio sito web</title>
</head>
<body>
  <h1>QUESTO MATHGATTO</h1>
  <img src="mathgatto.jpg" alt="Foto di mathgatto">
  <button id="inviaPosizione">Invia posizione</button>
  <p id="messaggio"></p>

  <script>
    document.getElementById("inviaPosizione").addEventListener("click", function() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var latitudine = position.coords.latitude;
          var longitudine = position.coords.longitude;

          // Qui chiameremo una funzione per inviare l'email con la posizione
          inviaEmail(latitudine, longitudine);

        }, function(error) {
          document.getElementById("messaggio").innerHTML = "Impossibile ottenere la posizione.";
        });
      } else {
        document.getElementById("messaggio").innerHTML = "Geolocalizzazione non supportata dal browser.";
      }
    });

function inviaEmail(latitudine, longitudine) {
  var url = "https://script.google.com/macros/s/AKfycbwJ7snL8_6wStbnVeKgUkg8a224rc0FSOXdpJSdHZQ/exec"; // Sostituisci con l'URL dell'applicazione web
  var data = {
    latitudine: latitudine,
    longitudine: longitudine,
    timestamp: new Date().toISOString()
  };

  fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  })
  .then(response => response.text())
  .then(message => {
    document.getElementById("messaggio").innerHTML = message;
  })
  .catch(error => {
    document.getElementById("messaggio").innerHTML = "Errore: " + error;
  });
}
  </script>
</body>
</html>
